(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,n){e.exports=n(85)},53:function(e,t,n){},54:function(e,t,n){},57:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n(19),c=n(21),l=n.n(c),s=n(4),u=n(5),h=n(7),p=n(6),d=n(41),f=n(2),m=(n(53),function(e){e.showPopUp;return r.a.createElement("div",{className:"solid-border header-bar"},r.a.createElement("h1",null,"PIXELART DLA SANDRY"))}),v=n(39),b=n.n(v),y=n(40),g=n.n(y),w=(n(54),function(){return r.a.createElement("div",{className:"footer solid-border"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"footer-text"},"Copyright \xa9 Magdalena Szade"),r.a.createElement("a",{href:"https://github.com/MagdaSzade",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(b.a,{style:{fontSize:"1rem"}})),r.a.createElement("a",{href:"https://www.linkedin.com/in/magdalena-szade/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(g.a,{style:{fontSize:"1rem"}}))))}),E=n(3),k=n.n(E),x=n(13),C=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fillCanva()}},{key:"componentDidUpdate",value:function(){this.fillCanva()}},{key:"fillCanva",value:function(){var e=document.getElementById("myCanvas").getContext("2d");this.props.pixels.forEach((function(t){e.fillStyle=t.color;var n=10*parseInt(t.key.substring(0,2)),a=10*parseInt(t.key.substring(2));e.fillRect(a,n,10,10)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{className:"solid-border",id:"myCanvas",width:10*this.props.width,height:10*this.props.height}))}}]),n}(r.a.Component),j=(n(57),function(e){return r.a.createElement("button",{className:"button thin-border",onClick:e.onButtonClick},e.text)}),O=n(22),S=n.n(O),z="http://localhost:9090/api/art",N=function(){var e=Object(x.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(z,"/saveArt"),{pixels:t,width:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(z,"/isPaid/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.isPaid);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(z,"/find/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){for(var n=[],a=0;a<e*t;a++){var r={color:"white",key:R(a,t)};n.push(r)}return n},A=function(e,t){for(var n=[],a=0;a<e.length;a++){var r=R(a,t),i={color:e[a],key:r};n.push(i)}return n},R=function(e,t){var n=e%t,a=Math.floor(e/t);return T(a,n)},T=function(e,t){var n="";return n+=e<10?"0"+e:e,n+=t<10?"0"+t:t},L=function(e,t){return parseInt(e.substring(0,2))*t+parseInt(e.substring(2))},M=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={pixels:[],width:null,height:null},e.componentDidMount=Object(x.a)(k.a.mark((function t(){var n,a,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e.props.match.params.id);case 2:n=t.sent,a=A(n.pixels,n.width),r=n.pixels.length/n.width,e.setState({pixels:a,width:n.width,height:r});case 6:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,"Zobacz m\xf3j pixel art!")),r.a.createElement(C,{pixels:this.state.pixels,width:this.state.width,height:this.state.height}),r.a.createElement("div",null,r.a.createElement("p",null,"Spr\xf3buj narysowa\u0107 co\u015b swojego."),r.a.createElement("a",{href:"/"},r.a.createElement(j,{text:"Narysuj"}))))}}]),n}(r.a.Component),_=(n(75),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={height:e.props.height,width:e.props.width},e.onHeightChange=function(t){e.setState({height:parseInt(t.target.value)})},e.onWidthChange=function(t){e.setState({width:parseInt(t.target.value)})},e.onSizeChange=function(t){t.preventDefault(),e.props.selectSize(e.state.width,e.state.height)},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"select-size"},r.a.createElement("form",{onSubmit:this.onSizeChange},r.a.createElement("div",{className:"grid inputs"},r.a.createElement("label",{htmlFor:"height"},"Wysoko\u015b\u0107"),r.a.createElement("input",{type:"number",id:"height",name:"height",min:"5",max:"15",value:this.state.height,onChange:this.onHeightChange}),r.a.createElement("label",{htmlFor:"width"},"Szeroko\u015b\u0107"),r.a.createElement("input",{type:"number",id:"width",name:"width",min:"5",max:"15",value:this.state.width,onChange:this.onWidthChange})),r.a.createElement("input",{type:"submit",value:"zmie\u0144",className:"button thin-border"})))}}]),n}(r.a.Component)),B=Object(i.b)((function(e){return{width:e.size.width,height:e.size.height}}),{selectSize:function(e,t){return{type:"SELECT_SIZE",payload:{width:e,height:t}}}})(_),W=(n(76),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onClick=function(){a.props.onPixelClick(a.pixelRef)},a.pixelRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.pixelRef.current.addEventListener("click",this.onClick)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.pixelRef,className:"pixel thin-border",id:this.props.id,style:this.props.style})}}]),n}(r.a.Component)),F=(n(77),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).colorsToSelect=["red","green","yellow","black","blue","purple","orange","white"],e.onSelectColor=function(t){e.props.selectColor(t.current.style.backgroundColor)},e}return Object(u.a)(n,[{key:"allColorToSelect",value:function(){var e=this;return this.colorsToSelect.map((function(t){return r.a.createElement(W,{style:{backgroundColor:t},key:t,onPixelClick:e.onSelectColor})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"select-color grid"},r.a.createElement("div",{className:"selected-color flex"},r.a.createElement("div",{className:"selected-color-text"},"Wybrany kolor"),r.a.createElement(W,{style:{backgroundColor:this.props.selectedColor}})),r.a.createElement("div",{className:"colors-to-select flex"},this.allColorToSelect()))}}]),n}(r.a.Component)),U=Object(i.b)((function(e){return{selectedColor:e.selectedColor}}),{selectColor:function(e){return{type:"SELECTED_COLOR",payload:e}}})(F),X=(n(78),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={width:0,height:0},e.createCanva=function(){return e.props.pixels.map((function(t){return r.a.createElement(W,{key:t.key,id:t.key,style:{backgroundColor:t.color},onPixelClick:e.onChangeColor})}))},e.onChangeColor=function(t){var n=L(t.current.id,e.props.width),a=e.props.pixels.map((function(t,a){return a===n?{color:e.props.selectedColor,key:t.key}:t}));e.props.setPixels(a)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.width!==this.state.width||this.props.height!==this.state.height){var t=D(this.props.height,this.props.width);t.forEach((function(t){var n=e.props.pixels.findIndex((function(e){return e.key===t.key}));-1!==n&&(t.color=e.props.pixels[n].color)})),this.setState({width:this.props.width,height:this.props.height}),this.props.setPixels(t)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"canva-conteiner"},r.a.createElement("div",{className:"canva grid",id:"canva",style:{gridTemplateColumns:"repeat(".concat(this.props.width,", 15px)")}},this.createCanva()))}}]),n}(r.a.Component)),Z=Object(i.b)((function(e){return{width:e.size.width,height:e.size.height,pixels:e.pixels,selectedColor:e.selectedColor}}),{setPixels:function(e){return{type:"PIXELS",payload:e}}})(X),H=n(42),J=(n(79),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={id:"",isPaid:!1},a.saveToDatabase=Object(x.a)(k.a.mark((function e(){var t,n,r,i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=Object(H.a)(a.props.pixels);try{for(n.s();!(r=n.n()).done;)i=r.value,t.push(i.color)}catch(c){n.e(c)}finally{n.f()}return e.next=5,N(t,a.props.width);case 5:o=e.sent,a.setState({id:o.data._id}),a.checkIfPaid();case 8:case"end":return e.stop()}}),e)}))),a.checkIfPaid=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.state.isPaid||(t=setInterval(Object(x.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(a.state.id);case 2:n=e.sent,console.log(n),!0===n&&(a.setState({isPaid:!0}),clearInterval(t));case 5:case"end":return e.stop()}}),e)}))),6e4));case 2:case"end":return e.stop()}}),e)}))),a.copyId=function(){a.idAreaRef.current.select(),document.execCommand("copy")},a.openPortal=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://www.siepomaga.pl/skarbonki/pixelart/koszyk/dodaj").focus();case 2:case"end":return e.stop()}}),e)}))),a.idAreaRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.saveToDatabase()}},{key:"facebookAvailable",value:function(){return r.a.createElement("iframe",{src:"https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2F".concat("http://localhost:9090.com","/").concat(this.state.id,"&layout=button&size=large&width=77&height=28&appId"),title:"facebook-share-button",width:"107",height:"28",style:{border:"none",overflow:"hidden"},scrolling:"no",frameBorder:"0",allow:"encrypted-media"})}},{key:"textDisplay",value:function(){return r.a.createElement("div",{className:"summary"},r.a.createElement("p",null,"Aby udost\u0119pni\u0107 sw\xf3j pixelart na facebooku zap\u0142a\u0107 cokolwiek na skarbonk\u0119 Sandry. W polu s\u0142owa wsparcia wpisz:"),r.a.createElement("input",{ref:this.idAreaRef,type:"text",value:this.state.id,readOnly:"readOnly"}),r.a.createElement(j,{onButtonClick:this.copyId,text:"Skopiuj ID"}),r.a.createElement(j,{onButtonClick:this.openPortal,text:"wp\u0142a\u0107"}))}},{key:"whatToDisplay",value:function(){return this.state.isPaid?this.facebookAvailable():this.textDisplay()}},{key:"render",value:function(){return r.a.createElement("div",{className:"share-art"},r.a.createElement(C,{pixels:this.props.pixels,width:this.props.width,height:this.props.height}),this.whatToDisplay())}}]),n}(r.a.Component)),Y=Object(i.b)((function(e){return{width:e.size.width,height:e.size.height,pixels:e.pixels}}))(J),q=(n(80),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={result:!1},e.onResult=function(){e.setState({result:!e.state.result})},e.content=function(){return e.state.result?r.a.createElement(Y,null):r.a.createElement("div",{className:"create-art"},r.a.createElement("div",{className:"grid"},r.a.createElement(B,null),r.a.createElement(U,null)),r.a.createElement("div",null,r.a.createElement(Z,null)),r.a.createElement(j,{onButtonClick:e.onResult,text:"zapisz"}))},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-art"},this.content())}}]),n}(r.a.Component)),G=(n(81),n(82),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"app-conteiner grid"},r.a.createElement(m,null),r.a.createElement("div",{className:"content-conteiner"},r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/:id",component:M}),r.a.createElement(f.a,{path:"/",component:q}))),r.a.createElement(w,null))))}}]),n}(r.a.Component)),K=Object(o.b)({selectedColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECTED_COLOR":return t.payload;default:return e}},size:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:10,height:10},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_SIZE":return t.payload;default:return e}},pixels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(10,10),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PIXELS":return t.payload;default:return e}}}),Q=Object(o.c)(K);l.a.render(r.a.createElement(i.a,{store:Q},r.a.createElement(G,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.6285d96a.chunk.js.map